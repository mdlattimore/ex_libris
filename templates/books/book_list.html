{% extends "_base.html" %}

{% block content %}
    <br>
    <div class="card shadow">
        <div class="card-body">
            {% if collection.name %}
                <h1 class="display-6">{{ collection.name }} Collection</h1>
                <p>{{ collection.description }}</p>
            {% else %}
                <h1 class="display-6">All Books</h1>
            {% endif %}

            <table class="table table-hover">

                <thead>
                <th scope="col"></th>
                <th scope="col">Title</th>
                <th scope="col">Cover</th>
                <th scope="col">Author</th>
                <th scope="col">Published</th>
                <th scope="col">Notes</th>
                </thead>
                <tbody>
                {% for book in books %}
                    <tr onclick="window.location='{% url 'book_detail' book.id %}'" class="cursor-pointer">
                        <th scope="row"></th>
                        <td><i>
                            {{ book.title }}{% if book.subtitle %}: {{ book.subtitle|truncatechars:20 }}{% endif %}</i>
                        </td>
                        {% if book.cover_image.thumbnail.url %}
                        <td><img src="{{ book.cover_image.thumbnail.url }}" alt="Book Cover"></td>
                            {% else %}
                            <td></td>
                    {% endif %}
                        <td>{{ book.author }}</td>
                        <td>{{ book.publication_date|slice:"0:4" }}</td>
                        <td class="list-note">{{ book.collectible_notes|default:""|truncatechars:40 }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <p><a href="{% url 'isbn_search' %}">Add New Book</a></p>

{% endblock content %}